<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Capstone Project Choice Tool</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .auth-section {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-success {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-weight: 600;
            color: #2c3e50;
        }

        select, input {
            padding: 10px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #3498db;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .project-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border-left: 5px solid #3498db;
            position: relative;
            overflow: hidden;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .project-card.selected {
            border-left-color: #e74c3c;
            background: #fef9f9;
        }

        .project-card.selected::after {
            content: "SELECTED";
            position: absolute;
            top: 10px;
            right: -30px;
            background: #e74c3c;
            color: white;
            padding: 5px 40px;
            font-size: 0.8em;
            font-weight: bold;
            transform: rotate(45deg);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 1.3em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
            flex: 1;
            padding-right: 10px;
        }

        .project-category {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            white-space: nowrap;
        }

        .project-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .project-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
        }

        .detail-item i {
            color: #3498db;
            width: 16px;
        }

        .tech-stack {
            margin-bottom: 15px;
        }

        .tech-stack-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            display: block;
        }

        .tech-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tech-tag {
            background: #ecf0f1;
            color: #2c3e50;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .project-highlights {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .highlights-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .highlights-list {
            list-style: none;
            padding: 0;
        }

        .highlights-list li {
            padding: 3px 0;
            font-size: 0.9em;
            color: #555;
        }

        .highlights-list li::before {
            content: "âœ“";
            color: #27ae60;
            font-weight: bold;
            margin-right: 8px;
        }

        .project-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .availability-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .availability-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .available .availability-dot {
            background: #27ae60;
        }

        .selected .availability-dot {
            background: #e74c3c;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #7f8c8d;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1em;
        }

        .form-group textarea {
            resize: vertical;
            height: 100px;
        }

        .member-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .member-input input {
            flex: 1;
        }

        .submission-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
        }

        .submission-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .submission-title {
            font-size: 1.2em;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .submission-project {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .status-selected {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .submission-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .members-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .member-item {
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .member-item:last-child {
            border-bottom: none;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-approve {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-reject {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .user-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #7f8c8d;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .success {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .firebase-status {
            background: #e3f2fd;
            color: #1565c0;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        .quick-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .notification {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .filters {
                flex-direction: column;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .project-details {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1><i class="fas fa-laptop-code"></i> IT Capstone Project Choice Tool</h1>
                    <p class="subtitle">Discover and select your industry-relevant capstone project</p>
                    <div id="firebaseStatus" class="firebase-status">
                        <i class="fas fa-spinner fa-spin"></i> Connecting to Firebase...
                    </div>
                </div>
                <div class="auth-section">
                    <div id="authButtons">
                        <button class="btn btn-primary" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                        <button class="btn btn-secondary" onclick="showRegisterModal()">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </div>
                    <div id="userInfo" style="display: none;" class="user-info">
                        <span id="userEmail"></span>
                        <span id="userRole" style="margin-left: 10px; font-weight: bold;"></span>
                        <button class="btn btn-secondary btn-small" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="stats-bar">
                <div class="stat-card">
                    <span class="stat-number" id="totalProjects">0</span>
                    <span class="stat-label">Total Projects</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="availableProjects">0</span>
                    <span class="stat-label">Available</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="selectedProjects">0</span>
                    <span class="stat-label">Selected</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number" id="mySubmissions">0</span>
                    <span class="stat-label">My Submissions</span>
                </div>
            </div>

            <div id="userNotification" class="notification" style="display: none;">
                <i class="fas fa-info-circle"></i>
                <span id="notificationText"></span>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label for="categoryFilter">Category</label>
                    <select id="categoryFilter" onchange="filterProjects()">
                        <option value="">All Categories</option>
                        <option value="Cloud Computing">Cloud Computing & Infrastructure</option>
                        <option value="Cybersecurity">Cybersecurity & Network Security</option>
                        <option value="Database">Database Management & Analytics</option>
                        <option value="Enterprise">Enterprise Systems & Integration</option>
                        <option value="Web Development">Web & Mobile Development</option>
                        <option value="IT Service">IT Service Management</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="difficultyFilter">Difficulty</label>
                    <select id="difficultyFilter" onchange="filterProjects()">
                        <option value="">All Levels</option>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="teamSizeFilter">Team Size</label>
                    <select id="teamSizeFilter" onchange="filterProjects()">
                        <option value="">Any Size</option>
                        <option value="2-3">2-3 Members</option>
                        <option value="3-4">3-4 Members</option>
                        <option value="4-5">4-5 Members</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="availabilityFilter">Availability</label>
                    <select id="availabilityFilter" onchange="filterProjects()">
                        <option value="">All Projects</option>
                        <option value="available">Available Only</option>
                        <option value="selected">Selected Only</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="searchFilter">Search</label>
                    <input type="text" id="searchFilter" placeholder="Search projects..." oninput="filterProjects()">
                </div>
            </div>

            <div id="projectsContainer">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading projects...
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login to Your Account</h2>
                <button class="close-btn" onclick="closeModal('loginModal')">&times;</button>
            </div>
            <div id="authError" class="error" style="display: none;"></div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="login()">Login</button>
                <button class="btn btn-secondary" onclick="closeModal('loginModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Account</h2>
                <button class="close-btn" onclick="closeModal('registerModal')">&times;</button>
            </div>
            <div id="registerError" class="error" style="display: none;"></div>
            <div class="form-group">
                <label for="registerEmail">Email Address</label>
                <input type="email" id="registerEmail" placeholder="Enter your email" required>
            </div>
            <div class="form-group">
                <label for="registerPassword">Password</label>
                <input type="password" id="registerPassword" placeholder="Enter password (min 6 characters)" required>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="register()">Register</button>
                <button class="btn btn-secondary" onclick="closeModal('registerModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Project Selection Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Project & Provide Group Information</h2>
                <button class="close-btn" onclick="closeModal('projectModal')">&times;</button>
            </div>
            <div id="projectError" class="error" style="display: none;"></div>
            <div id="projectSuccess" class="success" style="display: none;"></div>
            
            <div id="selectedProjectInfo"></div>
            
            <div class="form-group">
                <label for="groupName">Group Name *</label>
                <input type="text" id="groupName" placeholder="e.g., Team Alpha, CloudMasters, etc." required>
            </div>

            <div class="form-group">
                <label for="groupLeader">Group Leader *</label>
                <input type="text" id="groupLeader" placeholder="Group leader name" required>
            </div>

            <div class="form-group">
                <label for="leaderEmail">Leader Email *</label>
                <input type="email" id="leaderEmail" placeholder="Group leader email" required>
            </div>

            <div class="form-group">
                <label for="leaderStudentId">Leader Student ID *</label>
                <input type="text" id="leaderStudentId" placeholder="Student ID number" required>
            </div>

            <div class="form-group">
                <label>Group Members *</label>
                <div id="membersContainer">
                    <div class="member-input">
                        <input type="text" placeholder="Member 1 Full Name" required>
                        <input type="email" placeholder="Member 1 Email" required>
                        <input type="text" placeholder="Student ID" required>
                    </div>
                    <div class="member-input">
                        <input type="text" placeholder="Member 2 Full Name">
                        <input type="email" placeholder="Member 2 Email">
                        <input type="text" placeholder="Student ID">
                    </div>
                </div>
                <button type="button" class="btn btn-secondary btn-small" onclick="addMemberField()">
                    <i class="fas fa-plus"></i> Add Another Member
                </button>
            </div>

            <div class="form-group">
                <label for="motivation">Why did you choose this project? *</label>
                <textarea id="motivation" placeholder="Describe your motivation for selecting this project and how it aligns with your learning goals..." required></textarea>
            </div>

            <div class="form-group">
                <label for="expectedSkills">What skills do you hope to gain?</label>
                <textarea id="expectedSkills" placeholder="List the technical and professional skills you expect to develop..."></textarea>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="selectProject()">
                    <i class="fas fa-check"></i> Select Project & Submit Group Info
                </button>
                <button class="btn btn-secondary" onclick="closeModal('projectModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Admin Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>Edit Group Information</h2>
                <button class="close-btn" onclick="closeModal('editModal')">&times;</button>
            </div>
            <div id="editError" class="error" style="display: none;"></div>
            <div id="editSuccess" class="success" style="display: none;"></div>
            
            <div class="form-group">
                <label for="editGroupName">Group Name *</label>
                <input type="text" id="editGroupName" required>
            </div>

            <div class="form-group">
                <label for="editGroupLeader">Group Leader *</label>
                <input type="text" id="editGroupLeader" required>
            </div>

            <div class="form-group">
                <label for="editLeaderEmail">Leader Email *</label>
                <input type="email" id="editLeaderEmail" required>
            </div>

            <div class="form-group">
                <label for="editLeaderStudentId">Leader Student ID *</label>
                <input type="text" id="editLeaderStudentId" required>
            </div>

            <div class="form-group">
                <label>Group Members</label>
                <div id="editMembersContainer">
                </div>
                <button type="button" class="btn btn-secondary btn-small" onclick="addEditMemberField()">
                    <i class="fas fa-plus"></i> Add Member
                </button>
            </div>

            <div class="form-group">
                <label for="editMotivation">Motivation *</label>
                <textarea id="editMotivation" required></textarea>
            </div>

            <div class="form-group">
                <label for="editExpectedSkills">Expected Skills</label>
                <textarea id="editExpectedSkills"></textarea>
            </div>

            <div class="form-group">
                <label for="editStatus">Status</label>
                <select id="editStatus">
                    <option value="selected">Selected</option>
                    <option value="approved">Approved</option>
                    <option value="rejected">Rejected</option>
                </select>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="saveGroupEdit()">
                    <i class="fas fa-save"></i> Save Changes
                </button>
                <button class="btn btn-secondary" onclick="closeModal('editModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" style="display: none;">
        <div class="main-content" style="margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2><i class="fas fa-users-cog"></i> Group Submissions Dashboard</h2>
                <button class="btn btn-secondary" onclick="exportData()">
                    <i class="fas fa-download"></i> Export Data
                </button>
            </div>
            
            <div class="filters" style="margin-bottom: 20px;">
                <div class="filter-group">
                    <label for="projectFilter">Filter by Project</label>
                    <select id="projectFilter" onchange="filterSubmissions()">
                        <option value="">All Projects</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="statusFilter">Filter by Status</label>
                    <select id="statusFilter" onchange="filterSubmissions()">
                        <option value="">All Status</option>
                        <option value="selected">Selected</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                </div>
            </div>

            <div id="submissionsContainer">
                <div class="loading">Loading group submissions...</div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBvKn1TjSOadZAJp7g2Nexqrhp5ZP5SePg",
            authDomain: "capstoneproject-ee777.firebaseapp.com",
            projectId: "capstoneproject-ee777",
            storageBucket: "capstoneproject-ee777.firebasestorage.app",
            messagingSenderId: "776231964642",
            appId: "1:776231964642:web:043dff922e71e8264ab3bb",
            measurementId: "G-YNREVD0YMR"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Global variables
        let currentUser = null;
        let allProjects = [];
        let selectedProjectData = null;
        let allSubmissions = [];
        let isAdmin = false;
        let editingSubmissionId = null;
        let userSubmissions = [];

        // Admin credentials - UPDATED TO USE YOUR EMAIL
        const adminCredentials = {
            email: "ashraf.uddin@cihe.edu.au",
            password: "admin123"
        };

        // Enhanced project data with more details
        const sampleProjects = [
            {
                id: "cloud-migration-tool",
                title: "Small Business Cloud Migration Tool",
                category: "Cloud Computing",
                description: "Develop an automated assessment and migration tool for moving on-premises systems to cloud platforms (AWS/Azure/GCP). This tool will help small businesses transition to the cloud with minimal downtime.",
                difficulty: "Intermediate",
                teamSize: "3-4",
                duration: "16 weeks",
                techStack: ["JavaScript", "Node.js", "AWS SDK", "React", "Docker"],
                prerequisites: ["Cloud Computing Fundamentals", "Web Development", "Database Management"],
                learningOutcomes: [
                    "Cloud architecture design and implementation",
                    "Infrastructure as Code (IaC) principles",
                    "Cost optimization strategies",
                    "Security best practices for cloud migration"
                ],
                industryRelevance: "High demand for cloud migration services as businesses move to remote work models",
                deliverables: [
                    "Migration assessment tool",
                    "Automated deployment scripts",
                    "Cost analysis dashboard",
                    "Migration documentation"
                ],
                mentorInfo: "Industry mentor from AWS/Azure certified architect",
                highlights: [
                    "Work with real cloud platforms",
                    "Learn enterprise-level architecture",
                    "Industry mentor guidance",
                    "Portfolio-worthy project"
                ],
                selectedBy: null
            },
            {
                id: "cybersecurity-dashboard",
                title: "Security Information Dashboard for SMBs",
                category: "Cybersecurity",
                description: "Create an affordable SIEM solution tailored for small and medium businesses with real-time threat monitoring, automated incident response, and compliance reporting.",
                difficulty: "Advanced",
                teamSize: "4-5",
                duration: "16 weeks",
                techStack: ["Python", "Elasticsearch", "Kibana", "React", "Docker", "Machine Learning"],
                prerequisites: ["Cybersecurity Fundamentals", "Network Security", "Data Analysis"],
                learningOutcomes: [
                    "Security information and event management (SIEM)",
                    "Threat detection algorithms",
                    "Incident response automation",
                    "Compliance reporting systems"
                ],
                industryRelevance: "Critical need for affordable cybersecurity solutions for SMBs",
                deliverables: [
                    "Real-time monitoring dashboard",
                    "Automated threat detection system",
                    "Incident response workflows",
                    "Compliance reporting module"
                ],
                mentorInfo: "Cybersecurity consultant with 10+ years experience",
                highlights: [
                    "Machine learning integration",
                    "Real-time threat detection",
                    "Industry-standard tools",
                    "High market demand"
                ],
                selectedBy: null
            },
            {
                id: "customer-analytics",
                title: "Customer Analytics Dashboard",
                category: "Database",
                description: "Build a real-time customer behavior analysis platform for e-commerce businesses with predictive analytics, segmentation, and personalized recommendation engine.",
                difficulty: "Intermediate",
                teamSize: "3-4",
                duration: "16 weeks",
                techStack: ["Python", "PostgreSQL", "MongoDB", "Apache Kafka", "React", "TensorFlow"],
                prerequisites: ["Database Management", "Data Analytics", "Statistics"],
                learningOutcomes: [
                    "Real-time data processing",
                    "Customer segmentation techniques",
                    "Predictive analytics modeling",
                    "Business intelligence dashboard design"
                ],
                industryRelevance: "Essential for e-commerce businesses to understand customer behavior",
                deliverables: [
                    "Customer analytics dashboard",
                    "Recommendation engine",
                    "Segmentation algorithms",
                    "Predictive models"
                ],
                mentorInfo: "Data scientist from major e-commerce company",
                highlights: [
                    "AI/ML implementation",
                    "Big data processing",
                    "Business intelligence focus",
                    "Modern data stack"
                ],
                selectedBy: null
            },
            {
                id: "help-desk-system",
                title: "AI-Powered Help Desk System",
                category: "Enterprise",
                description: "Develop a complete IT service management solution with AI chatbot, automated ticket routing, knowledge management, and SLA monitoring for enterprise environments.",
                difficulty: "Intermediate",
                teamSize: "3-4",
                duration: "16 weeks",
                techStack: ["Node.js", "Express", "MongoDB", "React", "Natural Language Processing", "REST APIs"],
                prerequisites: ["Web Development", "Database Design", "Basic AI/ML"],
                learningOutcomes: [
                    "Enterprise software architecture",
                    "Natural language processing integration",
                    "Workflow automation design",
                    "Service level agreement management"
                ],
                industryRelevance: "Every organization needs efficient IT service management",
                deliverables: [
                    "Ticket management system",
                    "AI chatbot interface",
                    "Knowledge base platform",
                    "Analytics and reporting module"
                ],
                mentorInfo: "IT service management director from Fortune 500 company",
                highlights: [
                    "AI chatbot development",
                    "Enterprise system design",
                    "Workflow automation",
                    "Real-world application"
                ],
                selectedBy: null
            },
            {
                id: "mobile-field-service",
                title: "Field Service Management Mobile App",
                category: "Web Development",
                description: "Create a comprehensive mobile application for field technicians with offline capability, GPS tracking, inventory management, and real-time communication.",
                difficulty: "Beginner",
                teamSize: "2-3",
                duration: "16 weeks",
                techStack: ["React Native", "Node.js", "SQLite", "GPS APIs", "Firebase"],
                prerequisites: ["Mobile Development", "Database Fundamentals", "API Integration"],
                learningOutcomes: [
                    "Mobile app development for enterprise",
                    "Offline-first architecture",
                    "GPS and mapping integration",
                    "Real-time data synchronization"
                ],
                industryRelevance: "Critical for service-based businesses with field operations",
                deliverables: [
                    "Mobile application (iOS/Android)",
                    "Backend API system",
                    "Admin web dashboard",
                    "Integration documentation"
                ],
                mentorInfo: "Mobile development lead from field service company",
                highlights: [
                    "Cross-platform development",
                    "Offline functionality",
                    "GPS integration",
                    "Industry-focused solution"
                ],
                selectedBy: null
            },
            {
                id: "network-monitoring",
                title: "Network Performance Monitoring Dashboard",
                category: "IT Service",
                description: "Build a comprehensive network monitoring solution with real-time performance tracking, alerting system, and predictive maintenance capabilities.",
                difficulty: "Advanced",
                teamSize: "4-5",
                duration: "16 weeks",
                techStack: ["Python", "SNMP", "Grafana", "InfluxDB", "React", "Docker"],
                prerequisites: ["Network Administration", "System Monitoring", "Data Visualization"],
                learningOutcomes: [
                    "Network protocol analysis",
                    "Real-time monitoring systems",
                    "Alerting and notification systems",
                    "Performance optimization techniques"
                ],
                industryRelevance: "Essential for maintaining enterprise network infrastructure",
                deliverables: [
                    "Network monitoring dashboard",
                    "Alerting system",
                    "Performance analytics",
                    "Maintenance scheduling tool"
                ],
                mentorInfo: "Network operations center manager",
                highlights: [
                    "Enterprise networking",
                    "Real-time monitoring",
                    "Performance optimization",
                    "Industry-standard protocols"
                ],
                selectedBy: null
            },

            // Additional Cloud Computing & Infrastructure Projects
{
    id: "container-orchestration-platform",
    title: "Container Orchestration Platform for SMBs",
    category: "Cloud Computing",
    description: "Build a simplified container orchestration platform using Kubernetes to help small businesses deploy and manage containerized applications with automated scaling, load balancing, and service discovery.",
    difficulty: "Advanced",
    teamSize: "4-5",
    duration: "16 weeks",
    techStack: ["Kubernetes", "Docker", "Go", "React", "Helm", "Prometheus"],
    prerequisites: ["Container Technology", "Linux Administration", "Network Fundamentals"],
    learningOutcomes: [
        "Container orchestration principles",
        "Kubernetes cluster management",
        "Microservices architecture",
        "DevOps pipeline implementation"
    ],
    industryRelevance: "Container adoption growing rapidly in enterprise environments",
    deliverables: [
        "Kubernetes cluster setup",
        "Web-based management interface",
        "Automated deployment pipelines",
        "Monitoring and alerting system"
    ],
    mentorInfo: "DevOps engineer from major cloud provider",
    highlights: [
        "Learn cutting-edge container technology",
        "Enterprise-grade orchestration",
        "Scalable architecture design",
        "Industry-standard tools"
    ],
    selectedBy: null
},

{
    id: "serverless-framework",
    title: "Serverless Application Development Framework",
    category: "Cloud Computing",
    description: "Create a comprehensive framework for building and deploying serverless applications with automatic scaling, event-driven architecture, and integrated monitoring across multiple cloud providers.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["AWS Lambda", "Azure Functions", "Node.js", "Terraform", "CloudFormation"],
    prerequisites: ["Cloud Fundamentals", "JavaScript", "API Development"],
    learningOutcomes: [
        "Serverless architecture patterns",
        "Event-driven programming",
        "Cloud-native development",
        "Infrastructure automation"
    ],
    industryRelevance: "Serverless computing is the fastest-growing cloud segment",
    deliverables: [
        "Multi-cloud serverless framework",
        "Deployment automation tools",
        "Sample applications",
        "Performance monitoring dashboard"
    ],
    mentorInfo: "Cloud solutions architect specializing in serverless",
    highlights: [
        "Multi-cloud compatibility",
        "Event-driven architecture",
        "Cost-effective scaling",
        "Modern development practices"
    ],
    selectedBy: null
},

// Additional Cybersecurity Projects
{
    id: "vulnerability-assessment-toolkit",
    title: "Automated Vulnerability Assessment Toolkit",
    category: "Cybersecurity",
    description: "Develop an automated vulnerability scanning and assessment toolkit that integrates multiple security tools, generates comprehensive reports, and provides remediation recommendations for enterprise networks.",
    difficulty: "Advanced",
    teamSize: "4-5",
    duration: "16 weeks",
    techStack: ["Python", "Nmap", "OpenVAS", "Metasploit", "Django", "PostgreSQL"],
    prerequisites: ["Network Security", "Penetration Testing", "Python Programming"],
    learningOutcomes: [
        "Vulnerability assessment methodologies",
        "Security tool integration",
        "Risk analysis and reporting",
        "Automated security testing"
    ],
    industryRelevance: "Critical need for automated security assessment in all industries",
    deliverables: [
        "Integrated scanning platform",
        "Automated reporting system",
        "Risk prioritization engine",
        "Remediation tracking tools"
    ],
    mentorInfo: "Certified ethical hacker with 15+ years experience",
    highlights: [
        "Multiple security tool integration",
        "Automated threat detection",
        "Industry-standard methodologies",
        "Real-world security testing"
    ],
    selectedBy: null
},

{
    id: "identity-access-management",
    title: "Enterprise Identity and Access Management System",
    category: "Cybersecurity",
    description: "Build a comprehensive IAM solution with single sign-on (SSO), multi-factor authentication, role-based access control, and audit logging for enterprise environments.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["Java", "Spring Security", "LDAP", "OAuth 2.0", "React", "MySQL"],
    prerequisites: ["Web Security", "Database Design", "Authentication Protocols"],
    learningOutcomes: [
        "Identity management principles",
        "Authentication and authorization",
        "Security protocol implementation",
        "Compliance and audit logging"
    ],
    industryRelevance: "Essential for enterprise security and compliance requirements",
    deliverables: [
        "SSO authentication system",
        "Role management interface",
        "Multi-factor authentication",
        "Audit and compliance reports"
    ],
    mentorInfo: "Information security manager from financial services",
    highlights: [
        "Enterprise security standards",
        "SSO and MFA implementation",
        "Compliance-ready solution",
        "Scalable architecture"
    ],
    selectedBy: null
},

// Additional Database Management & Analytics Projects
{
    id: "real-time-data-pipeline",
    title: "Real-Time Data Processing Pipeline",
    category: "Database",
    description: "Design and implement a real-time data pipeline for processing streaming data from multiple sources, with data transformation, enrichment, and real-time analytics capabilities.",
    difficulty: "Advanced",
    teamSize: "4-5",
    duration: "16 weeks",
    techStack: ["Apache Kafka", "Apache Spark", "Python", "Elasticsearch", "Kibana", "Docker"],
    prerequisites: ["Big Data Fundamentals", "Database Design", "Data Analytics"],
    learningOutcomes: [
        "Stream processing architecture",
        "Real-time data transformation",
        "Distributed systems design",
        "Performance optimization"
    ],
    industryRelevance: "Critical for real-time decision making in modern businesses",
    deliverables: [
        "Streaming data pipeline",
        "Real-time analytics dashboard",
        "Data quality monitoring",
        "Scalability documentation"
    ],
    mentorInfo: "Big data architect from tech unicorn startup",
    highlights: [
        "Real-time processing at scale",
        "Modern data architecture",
        "Industry-leading tools",
        "Performance-critical system"
    ],
    selectedBy: null
},

{
    id: "database-performance-optimizer",
    title: "Intelligent Database Performance Optimization Tool",
    category: "Database",
    description: "Create an AI-powered database performance monitoring and optimization tool that automatically identifies bottlenecks, suggests optimizations, and implements performance improvements.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["Python", "PostgreSQL", "MongoDB", "Machine Learning", "Flask", "Redis"],
    prerequisites: ["Database Administration", "SQL Optimization", "Basic Machine Learning"],
    learningOutcomes: [
        "Database performance tuning",
        "Query optimization techniques",
        "Machine learning for IT operations",
        "Automated system monitoring"
    ],
    industryRelevance: "Database performance is critical for all modern applications",
    deliverables: [
        "Performance monitoring system",
        "AI-powered optimization engine",
        "Automated tuning recommendations",
        "Performance benchmarking tools"
    ],
    mentorInfo: "Senior database administrator from Fortune 500 company",
    highlights: [
        "AI-driven optimization",
        "Multi-database support",
        "Automated performance tuning",
        "Enterprise-grade monitoring"
    ],
    selectedBy: null
},

// Additional Enterprise Systems & Integration Projects
{
    id: "business-process-automation",
    title: "Business Process Automation Platform",
    category: "Enterprise",
    description: "Develop a comprehensive business process automation platform with workflow designer, task automation, document management, and integration capabilities for enterprise workflows.",
    difficulty: "Advanced",
    teamSize: "4-5",
    duration: "16 weeks",
    techStack: ["Java", "Spring Boot", "Camunda", "React", "PostgreSQL", "Apache Camel"],
    prerequisites: ["Enterprise Architecture", "Workflow Management", "System Integration"],
    learningOutcomes: [
        "Business process modeling",
        "Workflow automation design",
        "Enterprise integration patterns",
        "Digital transformation strategies"
    ],
    industryRelevance: "Essential for digital transformation in all industries",
    deliverables: [
        "Workflow design interface",
        "Process automation engine",
        "Integration connectors",
        "Analytics and reporting dashboard"
    ],
    mentorInfo: "Business process consultant from major consulting firm",
    highlights: [
        "Enterprise workflow automation",
        "Digital transformation focus",
        "Industry-standard BPM tools",
        "Scalable integration platform"
    ],
    selectedBy: null
},

{
    id: "enterprise-resource-planning",
    title: "Modular Enterprise Resource Planning System",
    category: "Enterprise",
    description: "Build a modular ERP system focusing on inventory management, financial tracking, and human resources with role-based access, reporting, and integration capabilities.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["C#", ".NET Core", "Angular", "SQL Server", "Azure", "Power BI"],
    prerequisites: ["Enterprise Systems", "Database Design", "Business Analysis"],
    learningOutcomes: [
        "Enterprise application architecture",
        "Business logic implementation",
        "Multi-tenant system design",
        "Enterprise reporting solutions"
    ],
    industryRelevance: "ERP systems are fundamental to business operations",
    deliverables: [
        "Core ERP modules",
        "User management system",
        "Financial reporting tools",
        "Integration APIs"
    ],
    mentorInfo: "ERP implementation consultant with 20+ years experience",
    highlights: [
        "Enterprise business logic",
        "Modular system architecture",
        "Real business processes",
        "Industry-standard practices"
    ],
    selectedBy: null
},

// Additional Web & Mobile Development Projects
{
    id: "progressive-web-app-platform",
    title: "Progressive Web Application Development Platform",
    category: "Web Development",
    description: "Create a comprehensive platform for building, deploying, and managing Progressive Web Apps with offline functionality, push notifications, and app-like experiences.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["React", "TypeScript", "Service Workers", "IndexedDB", "Firebase", "Webpack"],
    prerequisites: ["Advanced JavaScript", "Web APIs", "Mobile Development Concepts"],
    learningOutcomes: [
        "Progressive Web App architecture",
        "Offline-first development",
        "Service worker implementation",
        "Mobile-first design principles"
    ],
    industryRelevance: "PWAs are becoming the standard for mobile web experiences",
    deliverables: [
        "PWA development framework",
        "Offline synchronization system",
        "Push notification service",
        "App store deployment tools"
    ],
    mentorInfo: "Senior frontend architect from major e-commerce company",
    highlights: [
        "Cutting-edge web technology",
        "Mobile-first approach",
        "Offline functionality",
        "App-like user experience"
    ],
    selectedBy: null
},

{
    id: "elearning-platform",
    title: "Interactive E-Learning and Assessment Platform",
    category: "Web Development",
    description: "Develop a comprehensive e-learning platform with video streaming, interactive content, real-time collaboration, assessment tools, and learning analytics for educational institutions.",
    difficulty: "Beginner",
    teamSize: "2-3",
    duration: "16 weeks",
    techStack: ["Vue.js", "Node.js", "MongoDB", "WebRTC", "Socket.io", "AWS S3"],
    prerequisites: ["Web Development", "Database Fundamentals", "UI/UX Design"],
    learningOutcomes: [
        "Educational technology development",
        "Real-time communication systems",
        "Content management systems",
        "Learning analytics implementation"
    ],
    industryRelevance: "EdTech is experiencing massive growth and innovation",
    deliverables: [
        "Interactive learning platform",
        "Video streaming system",
        "Assessment and grading tools",
        "Learning analytics dashboard"
    ],
    mentorInfo: "EdTech product manager from leading online education company",
    highlights: [
        "Educational impact focus",
        "Interactive learning features",
        "Scalable content delivery",
        "Modern web technologies"
    ],
    selectedBy: null
},

// Additional IT Service Management Projects
{
    id: "infrastructure-monitoring-system",
    title: "Comprehensive Infrastructure Monitoring System",
    category: "IT Service",
    description: "Build an enterprise-grade infrastructure monitoring solution with real-time metrics collection, alerting, visualization, and automated incident response capabilities.",
    difficulty: "Advanced",
    teamSize: "4-5",
    duration: "16 weeks",
    techStack: ["Python", "Grafana", "Prometheus", "Ansible", "Kubernetes", "React"],
    prerequisites: ["System Administration", "Network Monitoring", "Automation Tools"],
    learningOutcomes: [
        "Infrastructure monitoring strategies",
        "Metrics collection and analysis",
        "Automated incident response",
        "Performance optimization techniques"
    ],
    industryRelevance: "Critical for maintaining enterprise IT infrastructure reliability",
    deliverables: [
        "Monitoring dashboard system",
        "Automated alerting platform",
        "Incident response workflows",
        "Performance analytics tools"
    ],
    mentorInfo: "Site reliability engineer from major cloud provider",
    highlights: [
        "Enterprise-scale monitoring",
        "Automated incident response",
        "Real-time visualization",
        "Industry-standard tools"
    ],
    selectedBy: null
},

{
    id: "it-asset-management",
    title: "Intelligent IT Asset Management System",
    category: "IT Service",
    description: "Develop a comprehensive IT asset management system with automated discovery, lifecycle tracking, compliance monitoring, and cost optimization for enterprise environments.",
    difficulty: "Intermediate",
    teamSize: "3-4",
    duration: "16 weeks",
    techStack: ["Java", "Spring Boot", "PostgreSQL", "React", "SNMP", "LDAP"],
    prerequisites: ["Enterprise Systems", "Network Protocols", "Database Design"],
    learningOutcomes: [
        "Asset lifecycle management",
        "Automated discovery protocols",
        "Compliance tracking systems",
        "Cost optimization strategies"
    ],
    industryRelevance: "Essential for IT governance and cost control in enterprises",
    deliverables: [
        "Asset discovery system",
        "Lifecycle tracking dashboard",
        "Compliance reporting tools",
        "Cost analysis platform"
    ],
    mentorInfo: "IT operations manager from multinational corporation",
    highlights: [
        "Automated asset discovery",
        "Compliance and governance",
        "Cost optimization focus",
        "Enterprise integration"
    ],
    selectedBy: null
},

{
    id: "automated-backup-recovery",
    title: "Automated Backup and Disaster Recovery System",
    category: "IT Service",
    description: "Create an intelligent backup and disaster recovery solution with automated scheduling, incremental backups, cross-platform support, and recovery testing capabilities.",
    difficulty: "Beginner",
    teamSize: "2-3",
    duration: "16 weeks",
    techStack: ["Python", "Bash", "Docker", "PostgreSQL", "React", "Cron"],
    prerequisites: ["System Administration", "Backup Technologies", "Scripting"],
    learningOutcomes: [
        "Backup strategy implementation",
        "Disaster recovery planning",
        "Automation scripting",
        "Data integrity verification"
    ],
    industryRelevance: "Data protection is critical for business continuity",
    deliverables: [
        "Automated backup system",
        "Recovery testing platform",
        "Monitoring dashboard",
        "Disaster recovery procedures"
    ],
    mentorInfo: "Disaster recovery specialist from data center company",
    highlights: [
        "Business continuity focus",
        "Automated data protection",
        "Cross-platform compatibility",
        "Recovery verification"
    ],
    selectedBy: null
},

                {
        id: "container-orchestration-platform",
        title: "Container Orchestration Platform for SMBs",
        category: "Cloud Computing",
        description: "Build a simplified container orchestration platform using Kubernetes to help small businesses deploy and manage containerized applications with automated scaling, load balancing, and service discovery.",
        difficulty: "Advanced",
        teamSize: "4-5",
        duration: "16 weeks",
        techStack: ["Kubernetes", "Docker", "Go", "React", "Helm", "Prometheus"],
        prerequisites: ["Container Technology", "Linux Administration", "Network Fundamentals"],
        learningOutcomes: [
            "Container orchestration principles",
            "Kubernetes cluster management",
            "Microservices architecture",
            "DevOps pipeline implementation"
        ],
        industryRelevance: "Container adoption growing rapidly in enterprise environments",
        deliverables: [
            "Kubernetes cluster setup",
            "Web-based management interface",
            "Automated deployment pipelines",
            "Monitoring and alerting system"
        ],
        mentorInfo: "DevOps engineer from major cloud provider",
        highlights: [
            "Learn cutting-edge container technology",
            "Enterprise-grade orchestration",
            "Scalable architecture design",
            "Industry-standard tools"
        ],
        selectedBy: null
    },
    {
        id: "ai-fraud-detection",
        title: "AI-Powered Fraud Detection System",
        category: "Artificial Intelligence",
        description: "Develop a machine learning model to detect fraudulent transactions in real-time using anomaly detection algorithms and behavioral analysis.",
        difficulty: "Advanced",
        teamSize: "3-4",
        duration: "14 weeks",
        techStack: ["Python", "TensorFlow", "Scikit-learn", "Flask", "SQL", "AWS Lambda"],
        prerequisites: ["Machine Learning", "Data Analysis", "Python Programming"],
        learningOutcomes: [
            "Anomaly detection techniques",
            "Real-time data processing",
            "Model deployment in production",
            "Financial risk assessment"
        ],
        industryRelevance: "Critical for banking, e-commerce, and fintech industries",
        deliverables: [
            "Trained ML model",
            "REST API for predictions",
            "Dashboard for fraud analytics",
            "Integration with payment systems"
        ],
        mentorInfo: "Data scientist from financial technology company",
        highlights: [
            "Real-world financial application",
            "High-accuracy model development",
            "Cloud deployment experience",
            "Ethical AI considerations"
        ],
        selectedBy: null
    },
    {
        id: "smart-hospital-management",
        title: "Smart Hospital Management System",
        category: "Web Development",
        description: "Create a comprehensive hospital management platform with patient records, appointment scheduling, inventory tracking, and telemedicine capabilities.",
        difficulty: "Intermediate",
        teamSize: "4-6",
        duration: "12 weeks",
        techStack: ["React", "Node.js", "MongoDB", "GraphQL", "Docker", "Twilio API"],
        prerequisites: ["Full-stack Development", "Database Design", "REST APIs"],
        learningOutcomes: [
            "Healthcare IT systems",
            "Secure data handling",
            "Complex workflow automation",
            "HIPAA compliance basics"
        ],
        industryRelevance: "Digital transformation in healthcare sector",
        deliverables: [
            "Patient portal",
            "Doctor scheduling system",
            "Medical inventory module",
            "Telemedicine integration"
        ],
        mentorInfo: "Health tech startup CTO",
        highlights: [
            "Impactful social application",
            "Full-stack development experience",
            "Real-time communication features",
            "Data security focus"
        ],
        selectedBy: null
    },
    {
        id: "iot-smart-agriculture",
        title: "IoT-Based Smart Agriculture System",
        category: "IoT",
        description: "Design an IoT solution for precision farming with soil moisture sensors, weather stations, and automated irrigation control.",
        difficulty: "Intermediate",
        teamSize: "3-5",
        duration: "10 weeks",
        techStack: ["Arduino/Raspberry Pi", "Python", "MQTT", "AWS IoT Core", "React Native", "TensorFlow Lite"],
        prerequisites: ["Embedded Systems", "Basic Electronics", "Wireless Protocols"],
        learningOutcomes: [
            "IoT architecture design",
            "Sensor data collection",
            "Edge computing applications",
            "Remote monitoring systems"
        ],
        industryRelevance: "Growing demand for agricultural technology",
        deliverables: [
            "Field sensor network",
            "Mobile monitoring app",
            "Data analytics dashboard",
            "Automation control system"
        ],
        mentorInfo: "Agri-tech solutions architect",
        highlights: [
            "Sustainable technology focus",
            "Hardware-software integration",
            "Real-world environmental impact",
            "Edge AI implementation"
        ],
        selectedBy: null
    },
    {
        id: "blockchain-supplychain",
        title: "Blockchain Supply Chain Tracker",
        category: "Blockchain",
        description: "Implement a transparent supply chain solution using blockchain to track product journey from manufacturer to consumer with tamper-proof records.",
        difficulty: "Advanced",
        teamSize: "3-4",
        duration: "14 weeks",
        techStack: ["Ethereum", "Solidity", "Web3.js", "IPFS", "Node.js", "React"],
        prerequisites: ["Blockchain Fundamentals", "Smart Contracts", "Web Development"],
        learningOutcomes: [
            "Smart contract development",
            "Decentralized app architecture",
            "Supply chain processes",
            "Cryptographic verification"
        ],
        industryRelevance: "Increasing adoption in logistics and retail",
        deliverables: [
            "Smart contract system",
            "Product verification DApp",
            "Supplier portal",
            "Audit trail mechanism"
        ],
        mentorInfo: "Blockchain consultant",
        highlights: [
            "Enterprise blockchain application",
            "Immutability concepts",
            "Decentralized storage",
            "Real-world transparency solution"
        ],
        selectedBy: null
    },
            {
  id: "iot-security-monitor",
  title: "IoT Network Security Monitoring System",
  category: "Cybersecurity",
  description: "Design an anomaly-based IDS for IoT networks that collects sensor data, analyzes traffic patterns using ML, and raises alerts on suspicious behavior.",
  difficulty: "Advanced",
  teamSize: "4-5",
  duration: "16 weeks",
  techStack: ["Python", "TensorFlow", "Scikit-learn", "MQTT", "Docker", "Grafana"],
  prerequisites: ["Network Security", "Machine Learning", "IoT Fundamentals"],
  learningOutcomes: [
    "Anomaly detection model training",
    "Real-time data ingestion",
    "Dashboard visualization",
    "Alerting and notification design"
  ],
  industryRelevance: "High demand for securing large-scale IoT deployments",
  deliverables: [
    "Trained ML anomaly detector",
    "Data ingestion pipelines",
    "Monitoring dashboard",
    "Automated alert system"
  ],
  mentorInfo: "Senior Cybersecurity Engineer",
  highlights: [
    "Edge vs. cloud analysis",
    "Time-series ML",
    "Scalable microservices",
    "Hands-on IDS tuning"
  ],
  selectedBy: null
},
{
  id: "cloud-cost-optimizer",
  title: "Cloud Cost Optimization Dashboard",
  category: "Cloud Computing",
  description: "Build a tool that ingests AWS/Azure billing APIs, analyzes spend trends, and suggests under-utilized resources to shut down or resize.",
  difficulty: "Intermediate",
  teamSize: "3-4",
  duration: "12 weeks",
  techStack: ["Node.js", "Express", "React", "Chart.js", "AWS SDK", "PostgreSQL"],
  prerequisites: ["Cloud Fundamentals", "REST APIs", "Database Design"],
  learningOutcomes: [
    "Cloud billing API integration",
    "Data ETL pipelines",
    "Interactive charting",
    "Cost-saving recommendation engine"
  ],
  industryRelevance: "Enterprises constantly seek to reduce cloud spend",
  deliverables: [
    "Backend API service",
    "Frontend dashboards",
    "Reporting module",
    "Resource recommendation engine"
  ],
  mentorInfo: "AWS Certified Solutions Architect",
  highlights: [
    "Real-time cost alerts",
    "Customizable budgets",
    "Role-based access",
    "Integration with Slack/email"
  ],
  selectedBy: null
},
{
  id: "student-performance-predictor",
  title: "Student Performance Prediction System",
  category: "Data Analytics",
  description: "Develop a machine learning model to predict student grades based on past performance, attendance, and engagement metrics, then visualize predictions for educators.",
  difficulty: "Intermediate",
  teamSize: "3-4",
  duration: "14 weeks",
  techStack: ["Python", "Pandas", "Scikit-learn", "Flask", "D3.js", "SQLite"],
  prerequisites: ["Data Preprocessing", "Supervised Learning", "Web Development"],
  learningOutcomes: [
    "Feature engineering",
    "Model training & evaluation",
    "API development",
    "Interactive data visualization"
  ],
  industryRelevance: "Data-driven insights for educational institutions",
  deliverables: [
    "Trained prediction model",
    "REST API for predictions",
    "Web dashboard",
    "User guide"
  ],
  mentorInfo: "Data Scientist in EdTech",
  highlights: [
    "Cross-validation techniques",
    "ROC/AUC analysis",
    "Deploying ML models",
    "UX for educators"
  ],
  selectedBy: null
},
{
  id: "ai-chatbot-support",
  title: "AI Chatbot for Customer Support",
  category: "AI & NLP",
  description: "Implement a conversational chatbot using transformer models to handle common customer queries, integrate with ticketing systems, and escalate when needed.",
  difficulty: "Advanced",
  teamSize: "4-5",
  duration: "16 weeks",
  techStack: ["Python", "HuggingFace Transformers", "FastAPI", "React", "MongoDB", "Socket.io"],
  prerequisites: ["NLP Fundamentals", "REST APIs", "Front-end Development"],
  learningOutcomes: [
    "Transformer-based intent classification",
    "Dialogue management",
    "Full-stack integration",
    "Scalable microservices"
  ],
  industryRelevance: "Automating high-volume support channels",
  deliverables: [
    "Chatbot backend service",
    "Web chat interface",
    "Ticketing integration",
    "Performance analytics"
  ],
  mentorInfo: "NLP Engineer",
  highlights: [
    "Intent/entities extraction",
    "Context management",
    "Logging & analytics",
    "Fail-over escalation"
  ],
  selectedBy: null
},
{
  id: "secure-file-sharing",
  title: "Secure File Sharing Platform",
  category: "Security",
  description: "Create a web application that allows end-to-end encrypted file uploads/downloads, with role-based access control and audit logging.",
  difficulty: "Intermediate",
  teamSize: "3-4",
  duration: "12 weeks",
  techStack: ["Node.js", "Express", "React", "OpenPGP.js", "PostgreSQL", "Docker"],
  prerequisites: ["Web Security", "Cryptography Basics", "Database Management"],
  learningOutcomes: [
    "Client-side encryption/decryption",
    "RBAC implementation",
    "Secure file storage",
    "Audit log design"
  ],
  industryRelevance: "Critical for compliance-heavy industries",
  deliverables: [
    "Encrypted file upload service",
    "User & role management",
    "Audit logging dashboard",
    "Deployment scripts"
  ],
  mentorInfo: "Security Architect",
  highlights: [
    "PGP key management",
    "Zero-knowledge proofs",
    "Secure file streaming",
    "Compliance considerations"
  ],
  selectedBy: null
},
            {
  id: "ai-phishing-detector",
  title: "AI-Based Phishing Email Detector",
  category: "Security",
  description: "Build a machine learning-powered email classification system that identifies phishing attempts with high accuracy.",
  difficulty: "Advanced",
  teamSize: "3-4",
  duration: "14 weeks",
  techStack: ["Python", "Scikit-learn", "Pandas", "Flask", "PostgreSQL"],
  prerequisites: ["Machine Learning", "Cybersecurity Basics", "Python Programming"],
  learningOutcomes: [
    "Text preprocessing and vectorization",
    "Training ML classifiers",
    "API integration",
    "Model evaluation & deployment"
  ],
  industryRelevance: "Email threat protection is a top priority for businesses",
  deliverables: [
    "Phishing detection API",
    "Training dataset & model",
    "Web interface for testing",
    "Deployment and documentation"
  ],
  mentorInfo: "AI Security Researcher",
  highlights: [
    "Natural language processing",
    "Explainable AI",
    "Email header & body analysis",
    "Custom phishing corpus"
  ],
  selectedBy: null
},
            {
  id: "iot-intrusion-detection",
  title: "IoT-Based Home Intrusion Detection",
  category: "IoT & Security",
  description: "Develop an IoT system using motion sensors and cameras for real-time detection of intrusions, with notifications and logging.",
  difficulty: "Intermediate",
  teamSize: "2-3",
  duration: "10 weeks",
  techStack: ["Raspberry Pi", "Python", "MQTT", "Node-RED", "AWS IoT"],
  prerequisites: ["IoT Basics", "Python Programming", "Sensor Integration"],
  learningOutcomes: [
    "Sensor data streaming",
    "Event-based alerts",
    "Cloud data ingestion",
    "Basic edge analytics"
  ],
  industryRelevance: "Smart home security is a fast-growing market",
  deliverables: [
    "Sensor and camera setup",
    "Intrusion alert dashboard",
    "Mobile notification system",
    "Cloud data storage"
  ],
  mentorInfo: "IoT Solutions Engineer",
  highlights: [
    "MQTT protocol usage",
    "Motion-triggered recording",
    "Low-latency event pipeline",
    "Edge-to-cloud data relay"
  ],
  selectedBy: null
},
            {
  id: "blockchain-voting-dapp",
  title: "Blockchain Voting DApp",
  category: "Blockchain",
  description: "Design a decentralized voting platform ensuring immutability, anonymity, and transparency using Ethereum smart contracts.",
  difficulty: "Advanced",
  teamSize: "3-5",
  duration: "14 weeks",
  techStack: ["Solidity", "Ethereum", "Truffle", "React", "IPFS"],
  prerequisites: ["Blockchain Fundamentals", "Smart Contracts", "Web3 Integration"],
  learningOutcomes: [
    "Smart contract development",
    "Token-based authentication",
    "Distributed storage integration",
    "Blockchain deployment"
  ],
  industryRelevance: "Key application in secure digital governance",
  deliverables: [
    "Smart contract voting system",
    "Frontend DApp interface",
    "Voter registration module",
    "Election result visualization"
  ],
  mentorInfo: "Blockchain Developer",
  highlights: [
    "Gas cost optimization",
    "Tamper-proof election records",
    "Zero-knowledge proof option",
    "Decentralized identity (DID)"
  ],
  selectedBy: null
},
        {
  id: "password-manager",
  title: "Password Manager Web Application",
  category: "Security",
  description: "Create a browser-based password manager using secure encryption, password generation, and syncing features.",
  difficulty: "Intermediate",
  teamSize: "2-4",
  duration: "12 weeks",
  techStack: ["Node.js", "Express", "MongoDB", "React", "Crypto"],
  prerequisites: ["Cryptography", "Web Development", "API Design"],
  learningOutcomes: [
    "Password hashing and encryption",
    "Master password vault logic",
    "Cross-device syncing",
    "Security best practices"
  ],
  industryRelevance: "Essential for personal and enterprise digital hygiene",
  deliverables: [
    "Password vault UI",
    "Encryption & decryption engine",
    "Login & sync features",
    "Security audit report"
  ],
  mentorInfo: "Cybersecurity Engineer",
  highlights: [
    "AES/GCM encryption",
    "Zero-knowledge architecture",
    "Two-factor authentication",
    "Breach notification support"
  ],
  selectedBy: null
},

            {
  id: "mental-health-chatbot",
  title: "AI Chatbot for Mental Health Support",
  category: "AI & Healthcare",
  description: "Design a privacy-preserving chatbot that uses NLP to offer supportive conversations and connect users with resources.",
  difficulty: "Intermediate",
  teamSize: "3-4",
  duration: "12 weeks",
  techStack: ["Python", "TensorFlow", "Flask", "React", "MongoDB"],
  prerequisites: ["NLP Basics", "AI Ethics", "Chatbot Development"],
  learningOutcomes: [
    "Intent classification",
    "Dialogue management",
    "Sentiment detection",
    "Confidential data handling"
  ],
  industryRelevance: "Rising mental health support needs post-COVID",
  deliverables: [
    "Chatbot interface",
    "NLP model & scripts",
    "Anonymized data logs",
    "Support resource engine"
  ],
  mentorInfo: "AI & Ethics Specialist",
  highlights: [
    "Sentiment-aware responses",
    "Data anonymization",
    "Fallback & escalation rules",
    "Accessibility features"
  ],
  selectedBy: null
}

            
        ];

        // Initialize Firebase Connection with better error handling
        function initializeFirebase() {
            const statusElement = document.getElementById('firebaseStatus');
            
            // Simple test without writing to Firestore to avoid permission issues
            auth.onAuthStateChanged(() => {
                statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Connected to Firebase successfully';
                statusElement.style.background = '#d4edda';
                statusElement.style.color = '#155724';
                
                // Initialize projects after successful connection
                initializeProjects();
            }, (error) => {
                console.error("Firebase connection error:", error);
                statusElement.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Firebase connection failed: ' + error.message;
                statusElement.style.background = '#f8d7da';
                statusElement.style.color = '#721c24';
                
                // Still try to load projects from local data
                loadProjectsFromLocal();
            });
        }

        // Initialize projects in Firebase with better error handling
        async function initializeProjects() {
            try {
                // Try to check if projects exist, but handle permission errors gracefully
                const projectsSnapshot = await db.collection('projects').limit(1).get().catch(error => {
                    console.log('Cannot access projects collection, using local data:', error.message);
                    return { empty: true };
                });
                
                if (projectsSnapshot.empty) {
                    console.log('Initializing projects in Firebase...');
                    
                    // Try to initialize projects in Firebase
                    try {
                        const batch = db.batch();
                        sampleProjects.forEach((project) => {
                            const projectRef = db.collection('projects').doc(project.id);
                            batch.set(projectRef, project);
                        });
                        
                        await batch.commit();
                        console.log('Projects initialized successfully');
                    } catch (initError) {
                        console.log('Cannot initialize projects in Firebase, using local data:', initError.message);
                        loadProjectsFromLocal();
                        return;
                    }
                }
                
                loadProjects();
                
            } catch (error) {
                console.error('Error initializing projects:', error);
                loadProjectsFromLocal();
            }
        }

        // Load projects from local data as fallback
        function loadProjectsFromLocal() {
            console.log('Loading projects from local data...');
            allProjects = sampleProjects;
            displayProjects(allProjects);
            updateStats();
        }

        // Authentication functions
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
        }

        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            // Clear error and success messages
            const errorElements = ['authError', 'registerError', 'projectError', 'editError'];
            errorElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.style.display = 'none';
            });
            const successElements = ['projectSuccess', 'editSuccess'];
            successElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.style.display = 'none';
            });
            
            // Reset editing state
            if (modalId === 'editModal') {
                editingSubmissionId = null;
            }
        }

        async function login() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;

            if (!email || !password) {
                showError('authError', 'Please fill in all fields');
                return;
            }

            try {
                // First try to create the admin account if it doesn't exist
                if (email === adminCredentials.email && password === adminCredentials.password) {
                    try {
                        await auth.createUserWithEmailAndPassword(email, password);
                        console.log('Admin account created successfully');
                    } catch (createError) {
                        if (createError.code !== 'auth/email-already-in-use') {
                            console.error('Error creating admin account:', createError);
                        }
                    }
                }

                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                console.log('Login successful:', userCredential.user.email);
                closeModal('loginModal');
                
            } catch (error) {
                console.error('Login error:', error);
                showError('authError', getFirebaseErrorMessage(error));
            }
        }

        async function register() {
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (!email || !password || !confirmPassword) {
                showError('registerError', 'Please fill in all fields');
                return;
            }

            if (password !== confirmPassword) {
                showError('registerError', 'Passwords do not match');
                return;
            }

            if (password.length < 6) {
                showError('registerError', 'Password must be at least 6 characters long');
                return;
            }

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                console.log('Registration successful:', userCredential.user.email);
                
                // Try to set user role in Firestore, but don't fail if it doesn't work
                try {
                    await db.collection('users').doc(userCredential.user.uid).set({
                        email: email,
                        role: email === adminCredentials.email ? 'admin' : 'student',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } catch (firestoreError) {
                    console.log('Could not save user role to Firestore:', firestoreError.message);
                }
                
                closeModal('registerModal');
                
            } catch (error) {
                console.error('Registration error:', error);
                showError('registerError', getFirebaseErrorMessage(error));
            }
        }

        function getFirebaseErrorMessage(error) {
            switch (error.code) {
                case 'auth/email-already-in-use':
                    return 'Email is already registered. Please use a different email or try logging in.';
                case 'auth/invalid-email':
                    return 'Please enter a valid email address.';
                case 'auth/weak-password':
                    return 'Password is too weak. Please use at least 6 characters.';
                case 'auth/user-not-found':
                    return 'No account found with this email. Please register first.';
                case 'auth/wrong-password':
                case 'auth/invalid-login-credentials':
                case 'auth/invalid-credential':
                    return 'Invalid email or password. Please check your credentials and try again.';
                case 'auth/too-many-requests':
                    return 'Too many failed attempts. Please try again later.';
                default:
                    return error.message || 'An authentication error occurred. Please try again.';
            }
        }

        function logout() {
            auth.signOut().then(() => {
                currentUser = null;
                isAdmin = false;
                userSubmissions = [];
                hideAdminPanel();
                updateAuthUI();
                updateStats();
                hideNotification();
                console.log('Logout successful');
            }).catch((error) => {
                console.error('Logout error:', error);
            });
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('authButtons');
            const userInfo = document.getElementById('userInfo');
            const userEmail = document.getElementById('userEmail');
            const userRole = document.getElementById('userRole');

            if (currentUser) {
                authButtons.style.display = 'none';
                userInfo.style.display = 'flex';
                userEmail.textContent = currentUser.email;
                userRole.textContent = isAdmin ? '(Admin)' : '(Student)';
                userRole.style.color = isAdmin ? '#e74c3c' : '#27ae60';
                
                // Load user submissions
                if (!isAdmin) {
                    loadUserSubmissions();
                }
            } else {
                authButtons.style.display = 'flex';
                userInfo.style.display = 'none';
            }
        }

        // Enhanced project functions
        async function loadProjects() {
            try {
                const projectsSnapshot = await db.collection('projects').get();
                allProjects = [];
                
                projectsSnapshot.forEach((doc) => {
                    allProjects.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                await checkProjectSelections();
                console.log('Projects loaded successfully from Firebase');
                
            } catch (error) {
                console.error('Error loading projects:', error);
                // Fallback to local data
                allProjects = sampleProjects;
                displayProjects(allProjects);
                updateStats();
            }
        }

        async function checkProjectSelections() {
            try {
                const selectionsSnapshot = await db.collection('project_selections').get();
                const selectedProjectIds = [];
                
                selectionsSnapshot.forEach((doc) => {
                    const data = doc.data();
                    selectedProjectIds.push(data.projectId);
                });
                
                // Update project status
                allProjects.forEach(project => {
                    if (selectedProjectIds.includes(project.id)) {
                        project.selectedBy = 'selected';
                    } else {
                        project.selectedBy = null;
                    }
                });
                
                displayProjects(allProjects);
                updateStats();
                
            } catch (error) {
                console.error('Error checking project selections:', error);
                displayProjects(allProjects);
                updateStats();
            }
        }

        function displayProjects(projects) {
            const container = document.getElementById('projectsContainer');
            
            if (projects.length === 0) {
                container.innerHTML = '<div class="loading">No projects found matching your criteria.</div>';
                return;
            }

            const projectsHTML = projects.map(project => {
                const isSelected = project.selectedBy && project.selectedBy !== currentUser?.uid;
                const availabilityClass = isSelected ? 'selected' : 'available';
                const availabilityText = isSelected ? 'Already Selected' : 'Available';
                const availabilityColor = isSelected ? '#e74c3c' : '#27ae60';

                return `
                    <div class="project-card ${availabilityClass}">
                        <div class="project-header">
                            <div class="project-title">${project.title}</div>
                            <div class="project-category">${project.category}</div>
                        </div>
                        
                        <div class="availability-indicator">
                            <div class="availability-dot"></div>
                            <span style="color: ${availabilityColor}; font-weight: bold;">${availabilityText}</span>
                        </div>
                        
                        <div class="project-description">${project.description}</div>
                        
                        <div class="project-details">
                            <div class="detail-item">
                                <i class="fas fa-signal"></i>
                                <span><strong>Difficulty:</strong> ${project.difficulty}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-users"></i>
                                <span><strong>Team Size:</strong> ${project.teamSize}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-clock"></i>
                                <span><strong>Duration:</strong> ${project.duration}</span>
                            </div>
                            <div class="detail-item">
                                <i class="fas fa-graduation-cap"></i>
                                <span><strong>Level:</strong> Bachelor</span>
                            </div>
                        </div>
                        
                        <div class="tech-stack">
                            <span class="tech-stack-label">Technologies:</span>
                            <div class="tech-tags">
                                ${project.techStack.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                            </div>
                        </div>
                        
                        <div class="project-highlights">
                            <div class="highlights-title">Key Highlights:</div>
                            <ul class="highlights-list">
                                ${project.highlights.slice(0, 3).map(highlight => `<li>${highlight}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="project-actions">
                            ${!isSelected && currentUser ? 
                                `<button class="btn btn-success btn-small" onclick="selectProjectModal('${project.id}')">
                                    <i class="fas fa-check"></i> Select This Project
                                </button>` : 
                                (isSelected ? 
                                    `<button class="btn btn-secondary btn-small" disabled>
                                        <i class="fas fa-lock"></i> Project Unavailable
                                    </button>` :
                                    `<button class="btn btn-primary btn-small" onclick="showLoginModal()">
                                        <i class="fas fa-sign-in-alt"></i> Login to Select
                                    </button>`
                                )
                            }
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `<div class="projects-grid">${projectsHTML}</div>`;
        }

        function selectProjectModal(projectId) {
            if (!currentUser) {
                showLoginModal();
                return;
            }

            selectedProjectData = allProjects.find(p => p.id === projectId);
            
            document.getElementById('selectedProjectInfo').innerHTML = `
                <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h3>${selectedProjectData.title}</h3>
                    <p><strong>Category:</strong> ${selectedProjectData.category}</p>
                    <p><strong>Team Size:</strong> ${selectedProjectData.teamSize}</p>
                    <p><strong>Difficulty:</strong> ${selectedProjectData.difficulty}</p>
                </div>
            `;
            
            document.getElementById('projectModal').style.display = 'block';
        }

        function addMemberField() {
            const container = document.getElementById('membersContainer');
            const memberDiv = document.createElement('div');
            memberDiv.className = 'member-input';
            memberDiv.innerHTML = `
                <input type="text" placeholder="Member Name">
                <input type="email" placeholder="Member Email">
                <input type="text" placeholder="Student ID">
                <button type="button" class="btn btn-secondary btn-small" onclick="this.parentElement.remove()">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            container.appendChild(memberDiv);
        }

        async function selectProject() {
            if (!selectedProjectData || !currentUser) {
                showError('projectError', 'Please ensure you are logged in and have selected a project');
                return;
            }

            const groupName = document.getElementById('groupName').value.trim();
            const groupLeader = document.getElementById('groupLeader').value.trim();
            const leaderEmail = document.getElementById('leaderEmail').value.trim();
            const leaderStudentId = document.getElementById('leaderStudentId').value.trim();
            const motivation = document.getElementById('motivation').value.trim();
            const expectedSkills = document.getElementById('expectedSkills').value.trim();
            
            if (!groupName || !groupLeader || !leaderEmail || !leaderStudentId || !motivation) {
                showError('projectError', 'Please fill in all required fields (marked with *)');
                return;
            }

            // Collect member information
            const memberInputs = document.querySelectorAll('#membersContainer .member-input');
            const members = [];
            
            memberInputs.forEach(memberDiv => {
                const inputs = memberDiv.querySelectorAll('input');
                if (inputs[0].value.trim() && inputs[1].value.trim()) {
                    members.push({
                        name: inputs[0].value.trim(),
                        email: inputs[1].value.trim(),
                        studentId: inputs[2].value.trim() || 'Not provided'
                    });
                }
            });

            if (members.length === 0) {
                showError('projectError', 'Please add at least one team member');
                return;
            }

            // Create selection data
            const selectionData = {
                projectId: selectedProjectData.id,
                projectTitle: selectedProjectData.title,
                projectCategory: selectedProjectData.category,
                groupName: groupName,
                groupLeader: {
                    name: groupLeader,
                    email: leaderEmail,
                    studentId: leaderStudentId
                },
                members: members,
                motivation: motivation,
                expectedSkills: expectedSkills,
                selectedBy: currentUser.uid,
                selectedAt: firebase.firestore.FieldValue.serverTimestamp(),
                status: 'selected'
            };

            try {
                // Save to Firebase Firestore
                const docRef = await db.collection('project_selections').add(selectionData);
                console.log('Project selection saved with ID:', docRef.id);
                
                // Try to update project status in projects collection
                try {
                    await db.collection('projects').doc(selectedProjectData.id).update({
                        selectedBy: currentUser.uid,
                        selectedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } catch (updateError) {
                    console.log('Could not update project status:', updateError.message);
                }

                document.getElementById('projectSuccess').style.display = 'block';
                document.getElementById('projectSuccess').textContent = 'Project selected and group information submitted successfully!';
                
                showNotification(`Successfully selected "${selectedProjectData.title}" for your group "${groupName}"!`);
                
                setTimeout(() => {
                    closeModal('projectModal');
                    checkProjectSelections(); // Refresh project display
                    clearProjectForm();
                    loadUserSubmissions(); // Refresh user submissions
                }, 2000);
                
            } catch (error) {
                console.error('Error submitting project selection:', error);
                showError('projectError', 'Error submitting project selection: ' + error.message);
            }
        }

        function clearProjectForm() {
            document.getElementById('groupName').value = '';
            document.getElementById('groupLeader').value = '';
            document.getElementById('leaderEmail').value = '';
            document.getElementById('leaderStudentId').value = '';
            document.getElementById('motivation').value = '';
            document.getElementById('expectedSkills').value = '';
            
            // Clear member inputs
            const membersContainer = document.getElementById('membersContainer');
            membersContainer.innerHTML = `
                <div class="member-input">
                    <input type="text" placeholder="Member 1 Full Name" required>
                    <input type="email" placeholder="Member 1 Email" required>
                    <input type="text" placeholder="Student ID" required>
                </div>
                <div class="member-input">
                    <input type="text" placeholder="Member 2 Full Name">
                    <input type="email" placeholder="Member 2 Email">
                    <input type="text" placeholder="Student ID">
                </div>
            `;
        }

        // Enhanced stats and notification functions
        function updateStats() {
            const totalProjects = allProjects.length;
            const availableProjects = allProjects.filter(p => !p.selectedBy).length;
            const selectedProjects = allProjects.filter(p => p.selectedBy).length;
            const mySubmissions = userSubmissions.length;

            document.getElementById('totalProjects').textContent = totalProjects;
            document.getElementById('availableProjects').textContent = availableProjects;
            document.getElementById('selectedProjects').textContent = selectedProjects;
            document.getElementById('mySubmissions').textContent = mySubmissions;
        }

        async function loadUserSubmissions() {
            if (!currentUser) return;
            
            try {
                const userSubmissionsSnapshot = await db.collection('project_selections')
                    .where('selectedBy', '==', currentUser.uid)
                    .get();
                
                userSubmissions = [];
                userSubmissionsSnapshot.forEach((doc) => {
                    userSubmissions.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                updateStats();
                
                if (userSubmissions.length > 0) {
                    const latestSubmission = userSubmissions[userSubmissions.length - 1];
                    showNotification(`You have selected "${latestSubmission.projectTitle}" with status: ${latestSubmission.status.toUpperCase()}`);
                }
                
            } catch (error) {
                console.error('Error loading user submissions:', error);
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('userNotification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.style.display = 'flex';
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }

        function hideNotification() {
            document.getElementById('userNotification').style.display = 'none';
        }

        // Enhanced filter functions
        function filterProjects() {
            const category = document.getElementById('categoryFilter').value;
            const difficulty = document.getElementById('difficultyFilter').value;
            const teamSize = document.getElementById('teamSizeFilter').value;
            const availability = document.getElementById('availabilityFilter').value;
            const search = document.getElementById('searchFilter').value.toLowerCase();

            let filtered = allProjects.filter(project => {
                const matchesCategory = !category || project.category.includes(category);
                const matchesDifficulty = !difficulty || project.difficulty === difficulty;
                const matchesTeamSize = !teamSize || project.teamSize === teamSize;
                const matchesAvailability = !availability || 
                    (availability === 'available' && !project.selectedBy) ||
                    (availability === 'selected' && project.selectedBy);
                const matchesSearch = !search || 
                    project.title.toLowerCase().includes(search) ||
                    project.description.toLowerCase().includes(search) ||
                    project.techStack.some(tech => tech.toLowerCase().includes(search)) ||
                    project.highlights.some(highlight => highlight.toLowerCase().includes(search));

                return matchesCategory && matchesDifficulty && matchesTeamSize && matchesAvailability && matchesSearch;
            });

            displayProjects(filtered);
        }

        // Admin Panel Functions (unchanged from original)
        function showAdminPanel() {
            document.querySelector('.main-content').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            loadSubmissions();
        }

        function hideAdminPanel() {
            document.querySelector('.main-content').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
        }

        async function loadSubmissions() {
            const container = document.getElementById('submissionsContainer');
            container.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Loading group submissions...</div>';
            
            try {
                const submissionsSnapshot = await db.collection('project_selections')
                    .orderBy('selectedAt', 'desc')
                    .get();
                    
                allSubmissions = [];
                submissionsSnapshot.forEach((doc) => {
                    allSubmissions.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                displaySubmissions(allSubmissions);
                populateProjectFilter();
                console.log('Submissions loaded successfully');
                
            } catch (error) {
                console.error('Error loading submissions:', error);
                container.innerHTML = '<div class="error">Error loading submissions: ' + error.message + '</div>';
            }
        }

        function populateProjectFilter() {
            const projectFilter = document.getElementById('projectFilter');
            const uniqueProjects = [...new Set(allSubmissions.map(sub => sub.projectTitle))];
            
            projectFilter.innerHTML = '<option value="">All Projects</option>';
            uniqueProjects.forEach(project => {
                projectFilter.innerHTML += `<option value="${project}">${project}</option>`;
            });
        }

        function displaySubmissions(submissions) {
            const container = document.getElementById('submissionsContainer');
            
            if (submissions.length === 0) {
                container.innerHTML = '<div class="loading">No group submissions found.</div>';
                return;
            }

            const submissionsHTML = submissions.map(submission => {
                const statusClass = `status-${submission.status}`;
                const submissionDate = submission.selectedAt && submission.selectedAt.toDate ? 
                    submission.selectedAt.toDate().toLocaleDateString() : 
                    'Unknown date';
                
                return `
                    <div class="submission-card">
                        <div class="submission-header">
                            <div>
                                <div class="submission-title">${submission.groupName}</div>
                                <div class="submission-project">Project: ${submission.projectTitle}</div>
                            </div>
                            <div class="status-badge ${statusClass}">${submission.status.toUpperCase()}</div>
                        </div>
                        
                        <div class="submission-details">
                            <div>
                                <strong>Group Leader:</strong><br>
                                ${submission.groupLeader.name}<br>
                                ${submission.groupLeader.email}<br>
                                ID: ${submission.groupLeader.studentId}
                            </div>
                            <div>
                                <strong>Submission Date:</strong> ${submissionDate}<br>
                                <strong>Category:</strong> ${submission.projectCategory}<br>
                                <strong>Team Size:</strong> ${submission.members.length + 1} members
                            </div>
                        </div>
                        
                        <div class="members-list">
                            <strong>Team Members:</strong>
                            ${submission.members.map(member => `
                                <div class="member-item">
                                    <strong>${member.name}</strong> - ${member.email} (ID: ${member.studentId})
                                </div>
                            `).join('')}
                        </div>
                        
                        <div>
                            <strong>Motivation:</strong>
                            <p>${submission.motivation}</p>
                        </div>
                        
                        ${submission.expectedSkills ? `
                            <div>
                                <strong>Expected Skills:</strong>
                                <p>${submission.expectedSkills}</p>
                            </div>
                        ` : ''}
                        
                        <div class="admin-actions">
                            <button class="btn btn-approve btn-small" onclick="updateSubmissionStatus('${submission.id}', 'approved')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-reject btn-small" onclick="updateSubmissionStatus('${submission.id}', 'rejected')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                            <button class="btn btn-primary btn-small" onclick="editSubmission('${submission.id}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-secondary btn-small" onclick="deleteSubmission('${submission.id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = submissionsHTML;
        }

        function filterSubmissions() {
            const projectFilter = document.getElementById('projectFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            let filtered = allSubmissions.filter(submission => {
                const matchesProject = !projectFilter || submission.projectTitle === projectFilter;
                const matchesStatus = !statusFilter || submission.status === statusFilter;
                return matchesProject && matchesStatus;
            });

            displaySubmissions(filtered);
        }

        async function updateSubmissionStatus(submissionId, newStatus) {
            try {
                await db.collection('project_selections').doc(submissionId).update({
                    status: newStatus,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                console.log('Status updated successfully');
                loadSubmissions(); // Reload to show updated status
                
            } catch (error) {
                console.error('Error updating status:', error);
                alert('Error updating status: ' + error.message);
            }
        }

        function editSubmission(submissionId) {
            const submission = allSubmissions.find(sub => sub.id === submissionId);
            if (!submission) return;

            editingSubmissionId = submissionId;

            // Populate edit form
            document.getElementById('editGroupName').value = submission.groupName;
            document.getElementById('editGroupLeader').value = submission.groupLeader.name;
            document.getElementById('editLeaderEmail').value = submission.groupLeader.email;
            document.getElementById('editLeaderStudentId').value = submission.groupLeader.studentId;
            document.getElementById('editMotivation').value = submission.motivation;
            document.getElementById('editExpectedSkills').value = submission.expectedSkills || '';
            document.getElementById('editStatus').value = submission.status;

            // Populate members
            const editMembersContainer = document.getElementById('editMembersContainer');
            editMembersContainer.innerHTML = '';
            
            submission.members.forEach(member => {
                const memberDiv = document.createElement('div');
                memberDiv.className = 'member-input';
                memberDiv.innerHTML = `
                    <input type="text" value="${member.name}" placeholder="Member Name">
                    <input type="email" value="${member.email}" placeholder="Member Email">
                    <input type="text" value="${member.studentId}" placeholder="Student ID">
                    <button type="button" class="btn btn-secondary btn-small" onclick="this.parentElement.remove()">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                editMembersContainer.appendChild(memberDiv);
            });

            document.getElementById('editModal').style.display = 'block';
        }

        function addEditMemberField() {
            const container = document.getElementById('editMembersContainer');
            const memberDiv = document.createElement('div');
            memberDiv.className = 'member-input';
            memberDiv.innerHTML = `
                <input type="text" placeholder="Member Name">
                <input type="email" placeholder="Member Email">
                <input type="text" placeholder="Student ID">
                <button type="button" class="btn btn-secondary btn-small" onclick="this.parentElement.remove()">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            container.appendChild(memberDiv);
        }

        async function saveGroupEdit() {
            if (!editingSubmissionId) return;

            const groupName = document.getElementById('editGroupName').value.trim();
            const groupLeader = document.getElementById('editGroupLeader').value.trim();
            const leaderEmail = document.getElementById('editLeaderEmail').value.trim();
            const leaderStudentId = document.getElementById('editLeaderStudentId').value.trim();
            const motivation = document.getElementById('editMotivation').value.trim();
            const expectedSkills = document.getElementById('editExpectedSkills').value.trim();
            const status = document.getElementById('editStatus').value;

            if (!groupName || !groupLeader || !leaderEmail || !leaderStudentId || !motivation) {
                showError('editError', 'Please fill in all required fields');
                return;
            }

            // Collect member information
            const memberInputs = document.querySelectorAll('#editMembersContainer .member-input');
            const members = [];
            
            memberInputs.forEach(memberDiv => {
                const inputs = memberDiv.querySelectorAll('input');
                if (inputs[0].value.trim() && inputs[1].value.trim()) {
                    members.push({
                        name: inputs[0].value.trim(),
                        email: inputs[1].value.trim(),
                        studentId: inputs[2].value.trim() || 'Not provided'
                    });
                }
            });

            const updatedData = {
                groupName: groupName,
                groupLeader: {
                    name: groupLeader,
                    email: leaderEmail,
                    studentId: leaderStudentId
                },
                members: members,
                motivation: motivation,
                expectedSkills: expectedSkills,
                status: status,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };

            try {
                await db.collection('project_selections').doc(editingSubmissionId).update(updatedData);
                
                document.getElementById('editSuccess').style.display = 'block';
                document.getElementById('editSuccess').textContent = 'Group information updated successfully!';
                
                setTimeout(() => {
                    closeModal('editModal');
                    loadSubmissions();
                    editingSubmissionId = null;
                }, 1500);
                
            } catch (error) {
                console.error('Error updating document:', error);
                showError('editError', 'Error updating group information: ' + error.message);
            }
        }

        async function deleteSubmission(submissionId) {
            if (confirm('Are you sure you want to delete this group submission? This action cannot be undone.')) {
                try {
                    await db.collection('project_selections').doc(submissionId).delete();
                    console.log('Document successfully deleted');
                    loadSubmissions();
                    
                } catch (error) {
                    console.error('Error removing document:', error);
                    alert('Error deleting submission: ' + error.message);
                }
            }
        }

        function exportData() {
            if (allSubmissions.length === 0) {
                alert('No data to export');
                return;
            }

            const csvContent = "data:text/csv;charset=utf-8," 
                + "Group Name,Project Title,Leader Name,Leader Email,Leader Student ID,Member Names,Member Emails,Student IDs,Status,Submission Date,Motivation,Expected Skills\n"
                + allSubmissions.map(sub => {
                    const memberNames = sub.members.map(m => m.name).join(';');
                    const memberEmails = sub.members.map(m => m.email).join(';');
                    const memberIds = sub.members.map(m => m.studentId).join(';');
                    const submissionDate = sub.selectedAt && sub.selectedAt.toDate ? sub.selectedAt.toDate().toISOString() : '';
                    return `"${sub.groupName}","${sub.projectTitle}","${sub.groupLeader.name}","${sub.groupLeader.email}","${sub.groupLeader.studentId}","${memberNames}","${memberEmails}","${memberIds}","${sub.status}","${submissionDate}","${sub.motivation.replace(/"/g, '""')}","${(sub.expectedSkills || '').replace(/"/g, '""')}"`;
                }).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `project_submissions_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
        }

        // Setup real-time listeners for project updates
        function setupRealtimeListeners() {
            try {
                // Listen for project selection changes
                db.collection('project_selections').onSnapshot((snapshot) => {
                    if (isAdmin && document.getElementById('adminPanel').style.display === 'block') {
                        loadSubmissions(); // Refresh admin panel
                    } else {
                        checkProjectSelections(); // Refresh project availability
                        if (currentUser && !isAdmin) {
                            loadUserSubmissions(); // Refresh user submissions
                        }
                    }
                }, (error) => {
                    console.error('Error in real-time listener:', error);
                });
            } catch (error) {
                console.log('Real-time listeners not available:', error.message);
            }
        }

        // Check user role with better error handling
        async function checkUserRole(user) {
            try {
                const userDoc = await db.collection('users').doc(user.uid).get();
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    isAdmin = userData.role === 'admin';
                } else {
                    // Create user document if it doesn't exist
                    isAdmin = user.email === adminCredentials.email;
                    try {
                        await db.collection('users').doc(user.uid).set({
                            email: user.email,
                            role: isAdmin ? 'admin' : 'student',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    } catch (createError) {
                        console.log('Could not create user document:', createError.message);
                    }
                }
                
                if (isAdmin) {
                    showAdminPanel();
                }
                
            } catch (error) {
                console.error('Error checking user role:', error);
                // Fallback to email-based admin check
                isAdmin = user.email === adminCredentials.email;
                if (isAdmin) {
                    showAdminPanel();
                }
            }
        }

        // Initialize the application
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                console.log('User authenticated:', user.email);
                
                await checkUserRole(user);
                updateAuthUI();
                setupRealtimeListeners();
            } else {
                currentUser = null;
                isAdmin = false;
                updateAuthUI();
            }
        });

        // Initialize Firebase and load projects when page loads
        window.addEventListener('load', () => {
            initializeFirebase();
            // Show student interface by default
            document.querySelector('.main-content').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            updateStats();
        });

        // Close modals when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        });

        // Click notification to hide
        document.getElementById('userNotification').addEventListener('click', hideNotification);
    </script>
</body>
</html>
